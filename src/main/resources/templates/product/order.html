<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/productLayout}">

        <script>
            window.onload = function (){
                console.log("아아아");
            }
            document.addEventListener('DOMContentLoaded', function() {
                // 모든 아코디언 버튼 요소 가져오기
                var accordionButtons = document.querySelectorAll('.accordion-button');

                document.querySelectorAll('.number')
                // 각 아코디언 버튼에 대해 이벤트 리스너 추가
                accordionButtons.forEach(function(button) {
                    button.addEventListener('click', function() {
                        // 해당 버튼의 data-bs-target 값을 사용하여 아코디언 컨텐츠 요소 가져오기
                        var targetId = button.getAttribute('data-bs-target');
                        var targetContent = document.getElementById(targetId);

                        // 현재 아코디언 상태 확인
                        var isExpanded = button.getAttribute('aria-expanded') === 'true';

                        // 아코디언 상태 변경
                        if (isExpanded) {
                            // 아코디언 닫기
                            button.setAttribute('aria-expanded', 'false');
                            targetContent.classList.remove('show');
                        } else {
                            // 아코디언 열기
                            button.setAttribute('aria-expanded', 'true');
                            targetContent.classList.add('show');
                        }
                    });
                });
            });
        </script>
            <!-- 주문 페이지 시작-->
            <section class="order" layout:fragment="content">
              
              <!-- 제목, 페이지 네비게이션 -->
              <nav>
                <h1>주문결제</h1>
                <p>
                  HOME > 장바구니 > <strong>주문결제</strong>
                </p>
              </nav>

              <form action="#">
                <!-- 주문 상품 목록 -->
                <div class="accordion" id="accordionPanelsStayOpenExample" th:each="map : ${orderProducts}">
                  <div class="accordion-item" th:each="orderProduct, index : ${map.value}">
                    <h2 class="accordion-header" >
                      <button th:text="${map.key}" th:id="'accordionButton'" class="accordion-button" type="button" data-bs-toggle="collapse"
                               th:data-bs-target="'panelsStayOpen-collapse'" aria-expanded="true" th:aria-controls="'panelsStayOpen-collapse'">
                      </button>
                    </h2>
                    <!-- 내용 -->
                    <div th:id="'panelsStayOpen-collapse'"
                          class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">

                        <div class="accordion-body">
                          <div class="cartProduct">

                            <a th:href="@{#}">
                              <img th:src="@{|/prodImg/${orderProduct.thumb1}|}" style="width: 80px; height: auto;" alt="상품이미지">
                            </a>

                            <div class="details">
                              <a th:href="@{#}">
                                <p class="productDetail"></p>
                              </a>
                              <div class="optionDiv"></div>
                              <p class="productDeliveryInfo"> 4/30(화) 이내 도착 </p>
                            </div>

                            <p>
                              <span class="delivery"> </span>
                              <span class="deliveryFree"> </span>

                            </p>

                            <div class="count">
                              <button th:class="'decrease'">-</button>
                              <input type="text" class="number" name="num"/>
                              <button class="increase">+</button>
                            </div>

                            <div class="cartPrice order-3">
                              <p class="originalPrice"><span data-v-15ea7d62=""></span></p>
                              <span class="discount"></span>
                              <p class="currentPrice" style="">
                                <strong></strong><span>원</span>
                              </p>
                            </div>
                          </div>
                        </div>
                      </th:block>
                    </div>
                    <div class="cartFooter">
                      <p>
                        <span class="point">0</span>
                        <span class="deliverySpan">+ 배송비 0원</span> - <span class="discountSpan">할인 0원</span>
                        <span > = </span>
                        <span> <strong class="totalPriceSpan"></strong> </span>
                    </div>
                  </div>
                </div>
                
                <!-- 최종 결제 정보 -->
                <div class="final">
                  <h2>최종결제 정보</h2>
                  <table border="0">
                    <tr>
                      <td>총</td>
                      <td>2 건</td>
                    </tr>
                    <tr>
                      <td>상품금액</td>
                      <td>27,000</td>
                    </tr>
                    <tr>
                      <td>할인금액</td>
                      <td>-1,000</td>
                    </tr>
                    <tr>
                      <td>배송비</td>
                      <td>0</td>
                    </tr>
                    <tr>
                      <td>포인트 할인</td>
                      <td>-1000</td>
                    </tr>
                    <tr>
                      <td>전체주문금액</td>
                      <td>25,000</td>
                    </tr>                            
                  </table>
                  <input type="button" name="" value="결제하기">              
                </div>
                  
                <!-- 배송정보 -->
                <article class="delivery">
                  <h1>배송정보</h1>                          
                  <table>
                    <tr>
                      <td>주문자</td>
                      <td><input type="text" th:value="${memberDTO.name}" name="orderer"/></td>
                    </tr>
                    <tr>
                      <td>휴대폰</td>
                      <td>
                        <input type="text" th:value="${memberDTO.hp}" name="hp" />
                        <span>- 포함 입력</span>
                      </td>
                    </tr>
                    <tr>
                      <td>우편번호</td>
                      <td>
                        <input type="text" name="zip" th:value="${memberDTO.zip}"/>
                        <input type="button" value="검색"/>
                      </td>
                    </tr>
                    <tr>
                      <td>기본주소</td>
                      <td>
                        <input type="text" name="addr1" th:value="${memberDTO.addr1}"/>
                      </td>
                    </tr>
                    <tr>
                      <td>상세주소</td>
                      <td>
                        <input type="text" name="addr2" th:value="${memberDTO.addr2}"/>
                      </td>
                    </tr>
                  </table>
                </article>

                <!-- 할인정보 -->
                <article class="discount">
                  <h1>할인정보</h1>

                  <div>
                    <p>현재 포인트 : <span></span>점</p>
                    <label>
                        <input type="text" name="point" th:value="${memberDTO.point}"/>점
                        <input type="button" value="적용"/>
                    </label>
                    <span>포인트 5,000점 이상이면 현금처럼 사용 가능합니다.</span>
                  </div>
                </article>

                <!-- 결제방법 -->
                <article class="payment">
                    <h1>결제방법</h1>
                    <div>
                        <span>신용카드</span>
                        <p>
                            <label><input type="radio" name="payment" value="type1"/>신용카드 결제</label>
                            <label><input type="radio" name="payment" value="type2"/>체크카드 결제</label>                                
                        </p>
                    </div>
                    <div>
                        <span>계좌이체</span>
                        <p>
                            <label><input type="radio" name="payment" value="type3"/>실시간 계좌이체</label>
                            <label><input type="radio" name="payment" value="type4"/>무통장 입금</label>                                
                        </p>
                    </div>
                    <div>
                        <span>기타</span>
                        <p>
                            <label><input type="radio" name="payment" value="type3"/>휴대폰결제</label>
                            <label>
                                <input type="radio" name="payment" value="type4"/>카카오페이
                                <img th:src="@{images/ico_kakaopay.gif}" alt="카카오페이"/>
                            </label>                                
                        </p>
                    </div>
                </article>

                <!-- 경고 -->
                <article class="alert">
                  <ul>
                      <li><span>롯데ON의 모든 판매자는 안전거래를 위해 구매금액, 결제수단에 상관없이 모든거래에 대하여 롯데ON 유한책임회사의 구매안전서비스(에스크로)를 제공하고 있습니다.</span></li>
                      <li><span>롯데ON 유한책임회사의 전자금융거래법에 의해 결제대금예치업 등록번호는 02-006-00008 입니다.</span></li>
                      <li><span>등록여부는 금융감독원 홈페이지(www.fss.or.kr)의 업무자료>인허가업무안내>전자금융업등록현황에서 확인하실수 있습니다.</span></li>
                  </ul>
                </article>
             
              </form>
              
            </section>
            <!-- 주문 페이지 끝-->
        </main>
        <footer>
          <ul>
            <li><a href="#">회사소개</a></li>
            <li><a href="#">서비스이용약관</a></li>
            <li><a href="#">개인정보처리방침</a></li>
            <li><a href="#">전자금융거래약관</a></li>
          </ul>
          <div>
            <p><img th:src="@{/images/footer_logo.png}" alt="로고" /></p>
            <p>
              <strong>(주)롯데ON</strong><br />
              서울특별시 송파구 올림픽로 300 롯데월드타워 26층 (역삼동 강남파이낸스센터)<br />
              대표이사 : 김사무엘상현, 정준호, 강성현<br />
              사업자등록번호 : 529-85-00774(롯데쇼핑(주) e커머스사업부)<br />
              통신판매업 신고 : 서울송파 제0158호<br>
              호스팅 서비스사업자 : 롯데쇼핑(주) e커머스사업부
            </p>
            <p>
              <strong>고객센터</strong><br />
              Tel : 1899-7000(유료) (평일 09:00~18:00)<br />
              Fax : 051-123-4567 | E-mail : lotteon@lotte.net<br />
            </p>
          </div>
        </footer>
        <button type="button" id="top">상단이동</button>
    </div>    
</body>
</html>