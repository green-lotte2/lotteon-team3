<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/csLayout}">
<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.0/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Q.에 대한 스타일 */
        .accordion-button span {
            color: #006cff;
            font-size: 18px;
            font-weight: bold;
            margin-right: 6px;
        }

        .btn.btn-primary {
            width: 100%;
            font-size: 16px; color: black;
            border: 1px solid #e9e9e9;
            overflow-anchor: none;
            background-color: #ffffff;
            height: 40px;
        }
    </style>
</head>

<section id="cs" layout:fragment="content">
    <div class="faq">
        <nav>
            <div>
                <p>홈
                    <span>></span>
                    <span th:switch="${group}">
                        <span th:case="notice" style="font-size: 16px; color: black;">공지사항</span>
                        <span th:case="qna" style="font-size: 16px; color: black;">고객문의</span>
                        <span th:case="faq" style="font-size: 16px; color: black;">자주묻는질문</span>
                    </span>
                </p>
            </div>
        </nav>
        <section class="list">
            <aside>
                <h2>자주묻는 질문</h2>
                <ul>
                    <!-- 각 유형별 링크 -->
                    <li th:class="${(cate eq 'member') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='member')}">회원</a></li>
                    <li th:class="${(cate=='coupon') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='coupon')}">쿠폰/이벤트</a></li>
                    <li th:class="${(cate=='order') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='order')}">주문/결제</a></li>
                    <li th:class="${(cate=='delivery') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='delivery')}">배송</a></li>
                    <li th:class="${(cate=='refund') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='refund')}">취소/반품/교환</a></li>
                    <li th:class="${(cate=='travel') ? 'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='travel')}">여행/숙박/항공</a></li>
                    <li th:class="${(cate=='safe') ?'on' : ''}"><a th:href="@{/cs/faq/list(group='faq',cate='safe')}">안전거래</a></li>
                </ul>
            </aside>
            <article>
                <nav>
                    <!-- 현재 카테고리에 따라 제목 변경 -->
                    <span th:switch="${cate}">
                        <span th:case="member">회원</span>
                        <span th:case="coupon">쿠폰/이벤트</span>
                        <span th:case="order">주문/결제</span>
                        <span th:case="delivery">배송</span>
                        <span th:case="refund">취소/반품/교환</span>
                        <span th:case="travel">여행/숙박/항공</span>
                        <span th:case="safe">안전거래</span>
                    </span>
                    <h2>가장 자주 묻는 질문입니다.</h2>
                </nav>

                <div class="accordion" id="accordionExample">
                    <!-- 각 유형별 최대 5개의 질문만 표시 -->
                    <th:block th:each="type : ${types}">
                        <br>
                        <br>
                        <h3 th:text="${type.typeName}"></h3>
                        <!-- 각 유형별 최대 5개의 질문만 표시 -->
                        <th:block th:each="dto, iterStat : ${type.boards}" th:if="${iterStat.index lt 5}">
                            <div class="accordion-item" style="border-bottom: 1px solid #e9e9e9;">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            th:data-bs-target="'#collapse_'+${dto.bno}" aria-expanded="true"
                                            th:aria-controls="'collapse_'+${dto.bno}">
                                        <span>Q.</span><h5 style="margin-bottom: 0px">[[${dto.title}]]</h5>
                                    </button>
                                </h2>
                                <div th:id="'collapse_'+${dto.bno}" class="accordion-collapse collapse"
                                     aria-labelledby="heading[[${dto.bno}]]" data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <p>[
                                            <span class="uid"
                                                  style="font-size: 16px; font-weight: bold"
                                                  th:text="${#strings.length(dto.uid) >= 3 ? #strings.substring(dto.uid, 0, 3) + '***' : #strings.substring(dto.uid, 0, 1)+'*'}"></span>
                                            <span style="font: normal 14px 'Noto Sans CJK KR'; color: #777; float: right"
                                                  th:text="${#temporals.format(dto.rdate, 'yyyy.MM.dd')}"></span>]
                                        </p><br>
                                        <p style="font-size: 16px;">[[${dto.content}]]</p>
                                    </div>
                                </div>
                            </div>
                        </th:block>
                        <!-- 각 유형별 더보기 버튼 -->
                        <div th:if="${type.boards.size() gt 5}">
                            <div th:id="'collapse_more_'+${type.typeName}" class="collapse">
                                <th:block th:each="dto, iterStat : ${type.boards}" th:if="${iterStat.index ge 5}">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                    th:data-bs-target="'#collapse_'+${dto.bno}" aria-expanded="true"
                                                    th:aria-controls="'collapse_'+${dto.bno}">
                                                <span>Q.</span><h5 style="margin-bottom: 1px">[[${dto.title}]]</h5>
                                            </button>
                                        </h2>
                                        <div th:id="'collapse_'+${dto.bno}" class="accordion-collapse collapse"
                                             aria-labelledby="heading[[${dto.bno}]]"
                                             data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <p>[
                                                    <span class="uid"
                                                          style="font-size: 16px; font-weight: bold"
                                                          th:text="${#strings.length(dto.uid) >= 3 ? #strings.substring(dto.uid, 0, 3) + '***' : #strings.substring(dto.uid, 0, 1)+'*'}"></span>
                                                    <span style="font: normal 14px 'Noto Sans CJK KR'; color: #777; float: right"
                                                          th:text="${#temporals.format(dto.rdate, 'yyyy.MM.dd')}"></span>]
                                                </p><br>
                                                <p style="font-size: 16px;">[[${dto.content}]]</p>
                                            </div>
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                            <button class="btn btn-primary" type="button" data-bs-toggle="collapse"
                                    th:data-bs-target="'#collapse_more_'+${type.typeName}" aria-expanded="true"
                                    th:aria-controls="'collapse_more_'+${type.typeName}">
                                더보기
                            </button>
                        </div>
                    </th:block>
                </div>

            </article>
        </section>
    </div>
</section>
</html>
